<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Red Dashboard</title>
    <link href="css/style.css" rel="stylesheet">
</head>

<body>
    <div id="timer">2:15</div>
    <div id="camera"></div>
    <article>
        <div class="select-container">
            <div class='sectitle'>Autonomous</div>
            <select id="auto-select">
                <option>No autonomous found</option>
            </select>
        </div>
        <div class="panels">
            <div class="panel">
                <div class="panelcont" id="battery">
                    <div class='sectitle'>Battery</div>
                    <center>
                        <div class='paneltext red'>0 V</div>
                    </center>
                </div>
            </div>
            <div class="panel">
                <div class="panelcont" id="shooterrpm">
                    <div class='sectitle'>Shooter</div>
                    <center>
                        <div class='paneltext green'>0 rpm</div>
                    </center>
                </div>
            </div>
            <div class="panel">
                <div class="panelcont" id="target">
                    <div class='sectitle'>Target</div>
                    <center>
                        <div class='paneltext red'>NO</div>
                    </center>
                </div>
            </div>
        </div>
        <div class="panels">
            <div class="panel">
                <div class="panelcont" id="distance">
                    <div class='sectitle'>Distance</div>
                    <center>
                        <div class='paneltext'>0.00in</div>
                    </center>
                </div>
            </div>
            <div class="panel">
                <div class="panelcont" id="shootEncoder">
                    <div class='sectitle'>Pointer</div>
                    <center>
                        <div class='paneltext'>0</div>
                    </center>
                </div>
            </div>
            <div class="panel">
                <div class="panelcont" id="calcrpm">
                    <div class='sectitle'>Ideal</div>
                    <center>
                        <div class='paneltext'>0</div>
                    </center>
                </div>
            </div>
        </div>
        <div class="panels">
            <div class="panel">
                <div class="panelcont" id="intakePos">
                    <div class='sectitle'>Intake</div>
                    <center>
                        <div class='paneltext'>Up</div>
                    </center>
                </div>
            </div>
            <div class="panel">
                <div class="panelcont" id="shootEncoder2">
                    <div class='sectitle'>Val1</div>
                    <center>
                        <div class='paneltext'>0</div>
                    </center>
                </div>
            </div>
            <div class="panel">
                <div class="panelcont" id="calcrpm2">
                    <div class='sectitle'>Val2</div>
                    <center>
                        <div class='paneltext'>0</div>
                    </center>
                </div>
            </div>
        </div>
        <!--<center>
            <div id="camera2"></div>
        </center>-->
    </article>
    <aside>
        <!-- Gyroscope -->
        <!--<center><svg id="gyro">
                <filter id="dropshadow" height="130%">
                    <feGaussianBlur in="SourceAlpha" stdDeviation="3" />
                    <feOffset dx="1" dy="1" result="offsetblur" />
                    <feComponentTransfer>
                    </feComponentTransfer>
                    <feMerge>
                        <feMergeNode in="SourceGraphic" />
                    </feMerge>
                </filter>
                <circle cx="85" cy="85" r="83" fill="white" style="filter:url(#dropshadow)"></circle>
                <circle cx="85" cy="85" r="10" fill="#F55c47" style="filter:url(#dropshadow)"></circle>
                <rect id="gyro-arm" rx="5" ry="5" x="80" y="5" width="10" height="80"></rect>
                <text id="gyro-number" x="90" y="115">0º</text>
            </svg>
        </center>-->


        <!--<center>
            <div class="switch">
                <div class="switchTitle">Demo Mode</div>
                <input type="checkbox" id="switchOne" onclick="ChangeSwitch(this, 'labelOne', 'switchOne')" />
                <label for="switchOne" id="labelOne">OFF</label>
            </div>
        </center>

        <center>
            <div class="switch">
                <div class="switchTitle">Switch 2</div>
                <input type="checkbox" id="switchTwo" onclick="ChangeSwitch(this, 'labelTwo', 'switchTwo')" />
                <label for="switchTwo" id="labelTwo">OFF</label>
            </div>
        </center>

        <center>
            <div class="switch">
                <div class="switchTitle">Switch 3</div>
                <input type="checkbox" id="switchThree" onclick="ChangeSwitch(this, 'labelThree', 'switchThree')" />
                <label for="switchThree" id="labelThree">OFF</label>
            </div>
        </center>

        <center>
            <div class="switch">
                <div class="switchTitle">Switch 4</div>
                <input type="checkbox" id="switchFour" onclick="ChangeSwitch(this, 'labelFour', 'switchFour')" />
                <label for="switchFour" id="labelFour">OFF</label>
            </div>
        </center>-->
        <!--<center>
        <div id="firstBall"><span class='dot'>1</span></div>
        <div id="secondBall"><span class='dot'>2</span></div>
        <div id="thirdBall"><span class='dot'>3</span></div>
        <div id="fourthBall"><span class='dot'>4</span></div>
        <div id="fifthBall"><span class='dot'>5</span></div>
        </center>-->

        <div class="motors">
            <div class='sectitle'>Motor Power</div>
            <div class="motor" id="leftMotor"><a>Left Drivetrain</a>
                <div class="progress">
                    <div class="progress-bar-cover" style="width: 99%;" id="leftSpeed"></div>
                </div>
            </div>
            <div class="motor" id="rightMotor"><a>Right Drivetrain</a>
                <div class="progress">
                    <div class="progress-bar-cover" style="width: 99%;" id="rightSpeed"></div>
                </div>
            </div>
            <div class="motor" id="intakeMotor"><a>Intake</a>
                <div class="progress">
                    <div class="progress-bar-cover" style="width: 99%;" id="intakeSpeed"></div>
                </div>
            </div>
            <div class="motor" id="intakeLiftMotor"><a>Intake Lift</a>
                <div class="progress">
                    <div class="progress-bar-cover" style="width: 99%;" id="intakeLiftSpeed"></div>
                </div>
            </div>
            <div class="motor" id="shooterMotor"><a>Shooter</a>
                <div class="progress">
                    <div class="progress-bar-cover" style="width: 99%;" id="shooterSpeed"></div>
                </div>
            </div>
            <div class="motor" id="revolverMotor"><a>Revolver</a>
                <div class="progress">
                    <div class="progress-bar-cover" style="width: 99%;" id="revolverSpeed"></div>
                </div>
            </div>
            <div class="motor" id="adjusterMotor"><a>Adjuster</a>
                <div class="progress">
                    <div class="progress-bar-cover" style="width: 99%;" id="adjusterSpeed"></div>
                </div>
            </div>
        </div>

        <!--<center>
            <div class="switch">
                <div class="switchTitle">Switch 5</div>
                <input type="checkbox" id="switchFive" onclick="ChangeSwitch(this, 'labelFive')" />
                <label for="switchFive" id="labelFive">OFF</label>
            </div>
        </center>-->
        <div class="vallor"></div>
        <div id="color"></div>
    </aside>
    <div id="login">
        <input id="connect-address" type="text" value="localhost" disabled>
        <button id="connect" disabled>Connecting</button>
    </div>
    <div class="iflogo"><img onclick="zeroLaunchpad()" width="150px" height="auto" src="assets/logo.png"></div>
    <script src="networktables/networktables.js"></script>
    <script src="connection.js"></script>
    <script src="ui.js"></script>
    <!--<script src="functions.js"></script>-->
    <script>
        const WebMidi = require('webmidi');
        WebMidi.enable(function (err) {
            if (err) console.log(err);

            console.log(WebMidi.inputs);
            if (err) {
                console.log("WebMidi could not be enabled.", err);
            } else {
                console.log("WebMidi enabled!");
                setTimeout(function () {

                    console.log(WebMidi.inputs);
                    //var input = WebMidi.getInputByName("MIDIIN2 (LPMiniMK3 MIDI)");
                    var input = WebMidi.inputs[WebMidi.inputs.length - 1];
                    var output = WebMidi.outputs[WebMidi.outputs.length - 1];
                    window.setInterval(function () {
                        //output.playNote("A2", 1);
                    }, secondInterval * 1000);

                    input.addListener('noteon', 1,
                        function (e) {
                            document.getElementById("color").innerHTML = "Red" + e.note
                                .name + e.note.octave;
                            if (e.note.name == "C") {
                                if (e.note.octave == "2") {
                                    console.log("Red Pressed");
                                    launchpadBtn(1, 1);
                                } else if (e.note.octave == "3") {
                                    console.log("Green Pressed");
                                    launchpadBtn(2, 1);
                                } else if (e.note.octave == "4") {
                                    console.log("Blue Pressed");
                                    launchpadBtn(3, 1);
                                } else if (e.note.octave == "5") {
                                    console.log("Yellow Pressed");
                                    launchpadBtn(4, 1);
                                } else if (e.note.octave == "6") {
                                    console.log("Spin Pressed");
                                    launchpadBtn(5, 1);
                                } else if (e.note.octave == "7") {
                                    console.log("Spin Adj CW Pressed");
                                    launchpadBtn(11, 1);
                                } else if (e.note.octave == "8") {
                                    console.log("Spin Adj CCW Pressed");
                                    launchpadBtn(12, 1);
                                }
                            } else if (e.note.name == "D") {
                                if (e.note.octave == "2") {
                                    console.log("Climb 1 Pressed");
                                    launchpadBtn(6, 1);
                                } else if (e.note.octave == "3") {
                                    console.log("Climb 2 Pressed");
                                    launchpadBtn(7, 1);
                                } else if (e.note.octave == "4") {
                                    console.log("Spinner Up Pressed");
                                    launchpadBtn(8, 1);
                                } else if (e.note.octave == "5") {
                                    console.log("Spinner Down Pressed");
                                    launchpadBtn(9, 1);
                                } else if (e.note.octave == "6") {
                                    console.log("Auto Color Pressed");
                                    launchpadBtn(10, 1);
                                } else if (e.note.octave == "7") {
                                    console.log("Adjust Climb Left Pressed");
                                    launchpadBtn(14, 1);
                                } else if (e.note.octave == "8") {
                                    console.log("Auto Climb Right Pressed");
                                    launchpadBtn(15, 1);
                                }
                            } else if (e.note.name == "E") {
                                if (e.note.octave == "2") {
                                    launchpadBtn(16, 1);
                                } else if (e.note.octave == "3") {
                                    launchpadBtn(17, 1);
                                } else if (e.note.octave == "4") {
                                    launchpadBtn(18, 1);
                                } else if (e.note.octave == "5") {
                                    launchpadBtn(19, 1);
                                } else if (e.note.octave == "6") {
                                    launchpadBtn(20, 1);
                                } else if (e.note.octave == "7") {
                                    launchpadBtn(21, 1);
                                } else if (e.note.octave == "8") {
                                    launchpadBtn(22, 1);
                                }
                            } else if (e.note.name == "F") {
                                if (e.note.octave == "2") {
                                    launchpadBtn(23, 1);
                                } else if (e.note.octave == "3") {
                                    launchpadBtn(24, 1);
                                } else if (e.note.octave == "4") {
                                    launchpadBtn(25, 1);
                                } else if (e.note.octave == "5") {
                                    launchpadBtn(26, 1);
                                } else if (e.note.octave == "6") {
                                    launchpadBtn(27, 1);
                                } else if (e.note.octave == "7") {
                                    launchpadBtn(28, 1);
                                }
                            } else if (e.note.name == "G") {
                                if (e.note.octave == "2") {
                                    launchpadBtn(29, 1);
                                } else if (e.note.octave == "3") {
                                    launchpadBtn(30, 1);
                                } else if (e.note.octave == "4") {
                                    launchpadBtn(31, 1);
                                } else if (e.note.octave == "5") {
                                    launchpadBtn(32, 1);
                                } else if (e.note.octave == "6") {
                                    launchpadBtn(33, 1);
                                } else if (e.note.octave == "7") {
                                    launchpadBtn(34, 1);
                                } else if (e.note.octave == "8") {
                                    launchpadBtn(35, 1);
                                }
                            }
                        }
                    );
                    input.addListener('noteoff', 1,
                        function (e) {
                            if (e.note.name == "C") {
                                if (e.note.octave == "2") {
                                    console.log("Red Released");
                                    launchpadBtn(1, 0);
                                } else if (e.note.octave == "3") {
                                    console.log("Green Released");
                                    launchpadBtn(2, 0);
                                } else if (e.note.octave == "4") {
                                    console.log("Blue Released");
                                    launchpadBtn(3, 0);
                                } else if (e.note.octave == "5") {
                                    console.log("Yellow Released");
                                    launchpadBtn(4, 0);
                                } else if (e.note.octave == "6") {
                                    console.log("Spin Released");
                                    launchpadBtn(5, 0);
                                } else if (e.note.octave == "7") {
                                    console.log("Spin Adj CW Released");
                                    launchpadBtn(11, 0);
                                } else if (e.note.octave == "8") {
                                    console.log("Spin Adj CCW Released");
                                    launchpadBtn(12, 0);
                                }
                            } else if (e.note.name == "D") {
                                if (e.note.octave == "2") {
                                    console.log("Climb 1 Released");
                                    launchpadBtn(6, 0);
                                } else if (e.note.octave == "3") {
                                    console.log("Climb 2 Released");
                                    launchpadBtn(7, 0);
                                } else if (e.note.octave == "4") {
                                    console.log("Spinner Up Released");
                                    launchpadBtn(8, 0);
                                } else if (e.note.octave == "5") {
                                    console.log("Spinner Down Released");
                                    launchpadBtn(9, 0);
                                } else if (e.note.octave == "6") {
                                    console.log("Auto Color Released");
                                    launchpadBtn(10, 0);
                                } else if (e.note.octave == "7") {
                                    console.log("Adjust Climb Left Released");
                                    launchpadBtn(14, 0);
                                } else if (e.note.octave == "8") {
                                    console.log("Auto Climb Right Released");
                                    launchpadBtn(15, 0);
                                }
                            } else if (e.note.name == "E") {
                                if (e.note.octave == "2") {
                                    launchpadBtn(16, 0);
                                } else if (e.note.octave == "3") {
                                    launchpadBtn(17, 0);
                                } else if (e.note.octave == "4") {
                                    launchpadBtn(18, 0);
                                } else if (e.note.octave == "5") {
                                    launchpadBtn(19, 0);
                                } else if (e.note.octave == "6") {
                                    launchpadBtn(20, 0);
                                } else if (e.note.octave == "7") {
                                    launchpadBtn(21, 0);
                                } else if (e.note.octave == "8") {
                                    launchpadBtn(22, 0);
                                }
                            } else if (e.note.name == "F") {
                                if (e.note.octave == "2") {
                                    launchpadBtn(23, 0);
                                } else if (e.note.octave == "3") {
                                    launchpadBtn(24, 0);
                                } else if (e.note.octave == "4") {
                                    launchpadBtn(25, 0);
                                } else if (e.note.octave == "5") {
                                    launchpadBtn(26, 0);
                                } else if (e.note.octave == "6") {
                                    launchpadBtn(27, 0);
                                } else if (e.note.octave == "7") {
                                    launchpadBtn(28, 0);
                                }
                            } else if (e.note.name == "G") {
                                if (e.note.octave == "2") {
                                    launchpadBtn(29, 0);
                                } else if (e.note.octave == "3") {
                                    launchpadBtn(30, 0);
                                } else if (e.note.octave == "4") {
                                    launchpadBtn(31, 0);
                                } else if (e.note.octave == "5") {
                                    launchpadBtn(32, 0);
                                } else if (e.note.octave == "6") {
                                    launchpadBtn(33, 0);
                                } else if (e.note.octave == "7") {
                                    launchpadBtn(34, 0);
                                } else if (e.note.octave == "8") {
                                    launchpadBtn(35, 0);
                                }
                            }
                        }
                    );

                    //set launchpad

                    //vars

                    //displayAnimation

                    //interval
                    setupAnimations(WebMidi);

                }, 2000);
                console.log("asd");
            }

        }, true);
    </script>
    <script src="animations.js"></script>
</body>

</html>
